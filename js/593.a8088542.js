"use strict";(self["webpackChunktracker"]=self["webpackChunktracker"]||[]).push([[593],{3358:function(e,l,t){t.d(l,{v:function(){return s}});t(8111),t(2489);var a=t(2261),u=t(144),r=t(6768),n=t(7082);const s=(0,a.nY)("exercise",(()=>{const e=(0,u.Kh)({list:[{name:"All",id:0}],loading:!0}),l=(0,u.KR)([]),t=(0,u.Kh)({group_id:null,exercises:[]}),a=async()=>{const{data:l}=await n.N.from("exercise_groups").select("*");if(l){const t={id:0,name:"All"},a=[t,...l].sort(((e,l)=>e.id-l.id));e.list=a,e.loading=!1}},s=(0,r.EW)((()=>e.list.filter((e=>0!=e.id)))),i=async()=>{const{data:e}=await n.N.from("exercises").select("*").order("group_id").order("ordering");e&&(l.value=e)};return{exerciseGroupData:e,createSelectableGroupsForNewRun:s,allExercises:l,newRunRecording:t,getExerciseGroups:a,getAllExercises:i}}))},4593:function(e,l,t){t.r(l),t.d(l,{default:function(){return I}});t(4114),t(8111),t(116);var a=t(6768),u=t(144),r=t(4232),n=t(1387),s=t(3358),i=(t(2489),t(2261)),o=t(7082),c=t(7719);const d=(0,i.nY)("runRecorder",(()=>{const e=(0,s.v)(),l=(0,u.KR)(null),t=(0,u.KR)(0),r=(0,u.KR)([]),n=(0,a.EW)((()=>e.allExercises.filter((e=>e.group_id===l.value)))),i=(0,a.EW)((()=>n.value[t.value])),d=e=>{l.value=e,t.value=0,r.value=[]},v=(e,l)=>{r.value[t.value]={exercise_id:i.value.id,score:parseFloat(e),time_taken:parseFloat(l)}},m=()=>{t.value<n.value.length-1&&t.value++},k=()=>{t.value>0&&t.value--},_=()=>{l.value=null,t.value=0,r.value=[]},b=async()=>{const e=(0,c.k)();if(!e.userData.alt||!l.value||0===r.value.length)throw new Error("Missing required data to submit run.");const{error:a}=await o.N.rpc("submit_run_transaction",{p_alt_user_id:e.userData.alt,p_group_id:l.value,p_results:r.value});if(a)throw new Error("Failed to submit run transactionally.");return l.value=null,t.value=0,r.value=[],e.fetchRuns(),!0};return{groupId:l,currentIndex:t,results:r,exercises:n,currentExercise:i,setGroupId:d,saveResult:v,goNext:m,goBack:k,cancelRun:_,submitRun:b}})),v={class:"text-subtitle-1"},m={class:"text-subtitle-1"},k={class:"text-subtitle-1"},_={key:0,class:"text-subtitle-1"},b={key:1},p={key:0,class:"text-subtitle-1"},g={class:"text-subtitle-1",style:{"white-space":"pre-line"}};var x={__name:"RunRecorder",emits:["complete"],setup(e,{emit:l}){const t=l,n=d(),s=(0,u.KR)(null),i=(0,u.KR)(null),o=(0,u.KR)(null),c=(0,a.EW)((()=>[e=>null!==e&&""!==e||"Score cannot be empty.",e=>parseFloat(e)<=n.currentExercise?.max_points||`Score cannot exceed ${n.currentExercise?.max_points} points.`])),x=[e=>null!==e&&""!==e||"Time cannot be empty."];(0,a.wB)((()=>n.currentIndex),(()=>{const e=n.results[n.currentIndex];s.value=e?.score??null,i.value=e?.time_taken??null}),{immediate:!0});const f=async()=>{const{valid:e}=await o.value.validate();e&&(n.saveResult(s.value,i.value),n.currentIndex<n.exercises.length-1?n.goNext():t("complete"))},F=()=>{n.goBack()},R=()=>{n.cancelRun()};return(e,l)=>{const t=(0,a.g2)("v-card-title"),d=(0,a.g2)("v-card-subtitle"),y=(0,a.g2)("v-card-text"),E=(0,a.g2)("v-text-field"),h=(0,a.g2)("v-col"),W=(0,a.g2)("v-row"),w=(0,a.g2)("v-form"),C=(0,a.g2)("v-btn"),V=(0,a.g2)("v-spacer"),L=(0,a.g2)("v-card-actions"),S=(0,a.g2)("v-card"),X=(0,a.g2)("v-slide-x-transition");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(X,{mode:"out-in"},{default:(0,a.k6)((()=>[(0,u.R1)(n).currentExercise?((0,a.uX)(),(0,a.Wv)(S,{key:(0,u.R1)(n).currentIndex,class:"mt-4",elevation:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{class:"text-h6 font-weight-bold"},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)((0,u.R1)(n).currentExercise.name),1)])),_:1}),(0,a.bF)(d,{class:"text-caption"},{default:(0,a.k6)((()=>[(0,a.eW)(" Exercise "+(0,r.v_)((0,u.R1)(n).currentIndex+1)+" of "+(0,r.v_)((0,u.R1)(n).exercises.length),1)])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",v,[l[2]||(l[2]=(0,a.Lk)("strong",null,"Distance:",-1)),(0,a.eW)(" "+(0,r.v_)((0,u.R1)(n).currentExercise.distance_yards)+" yards ",1)]),(0,a.Lk)("div",m,[l[3]||(l[3]=(0,a.Lk)("strong",null,"Par Time:",-1)),(0,a.eW)(" "+(0,r.v_)((0,u.R1)(n).currentExercise.par_time??"N/A")+" seconds ",1)]),(0,a.Lk)("div",k,[l[4]||(l[4]=(0,a.Lk)("strong",null,"Start Position:",-1)),(0,a.eW)(" "+(0,r.v_)((0,u.R1)(n).currentExercise?.options?.start_position??"Not specified"),1)]),(0,u.R1)(n).currentExercise?.options?.hand_usage?((0,a.uX)(),(0,a.CE)("div",_,[l[5]||(l[5]=(0,a.Lk)("strong",null,"Hand Usage:",-1)),(0,a.eW)(" "+(0,r.v_)((0,u.R1)(n).currentExercise?.options?.hand_usage),1)])):(0,a.Q3)("",!0),null!=(0,u.R1)(n).currentExercise.options?((0,a.uX)(),(0,a.CE)("div",b,[(0,u.R1)(n).currentExercise.options.modified_scoring?((0,a.uX)(),(0,a.CE)("div",p,[l[6]||(l[6]=(0,a.Lk)("strong",null,"Modified Scoring Rules:",-1)),(0,a.eW)(" "+(0,r.v_)((0,u.R1)(n).currentExercise.options.modified_scoring_desc),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),l[7]||(l[7]=(0,a.Lk)("div",{class:"text-subtitle-1 mt-2"},[(0,a.Lk)("strong",null,"Instructions:")],-1)),(0,a.Lk)("div",g,(0,r.v_)((0,u.R1)(n).currentExercise.instructions),1)])),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{ref_key:"scoreForm",ref:o},{default:(0,a.k6)((()=>[(0,a.bF)(W,null,{default:(0,a.k6)((()=>[(0,a.bF)(h,{cols:"12",md:"6"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),label:"Score",type:"number",variant:"outlined",step:"0.01",rules:c.value},null,8,["modelValue","rules"])])),_:1}),(0,u.R1)(n).currentExercise?.par_time?((0,a.uX)(),(0,a.Wv)(h,{key:0,cols:"12",md:"6"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),label:"Time (seconds)",type:"number",variant:"outlined",step:"0.01",rules:x},null,8,["modelValue"])])),_:1})):(0,a.Q3)("",!0)])),_:1})])),_:1},512)])),_:1}),(0,a.bF)(L,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{onClick:R,variant:"outlined",color:"red"},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("Cancel Run")]))),_:1}),(0,a.bF)(V),(0,a.bF)(C,{onClick:F,variant:"outlined",disabled:0===(0,u.R1)(n).currentIndex,class:"mr-3"},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("Back")]))),_:1},8,["disabled"]),(0,a.bF)(C,{onClick:f,color:"primary",variant:"outlined"},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("Next")]))),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1})])}}};const f=x;var F=f,R={__name:"ScoringRulesDialog",props:{modelValue:Boolean,text:{type:String,default:null}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,u=l,n=(0,a.EW)({get:()=>t.modelValue,set:e=>u("update:modelValue",e)});return(e,l)=>{const u=(0,a.g2)("v-card-title"),s=(0,a.g2)("v-card-text"),i=(0,a.g2)("v-spacer"),o=(0,a.g2)("v-btn"),c=(0,a.g2)("v-card-actions"),d=(0,a.g2)("v-card"),v=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e),width:"auto"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("Scoring Rules")]))),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(t.text),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(i),(0,a.bF)(o,{onClick:l[0]||(l[0]=e=>n.value=!1)},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Close")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};const y=R;var E=y,h=(t(3579),t(7727)),W={__name:"RunSummary",props:{results:{type:Array,required:!0},exercises:{type:Array,required:!0}},emits:["submit","edit","cancel"],setup(e,{emit:l}){const t=d(),n=(0,h.e)(),s=e,i=l,o=(0,u.KR)([...s.results]),c=e=>s.exercises.find((l=>l.id===e))?.distance_yards||"Unknown",v=e=>s.exercises.find((l=>l.id===e))?.name||"Unknown",m=e=>s.exercises.find((l=>l.id===e))?.max_points||"Unknown",k=e=>!(s.exercises.find((l=>l.id===e))?.par_time>0),_=e=>{const l=m(e.exercise_id);return"number"===typeof l&&e.score>l},b=(0,a.EW)((()=>o.value.some((e=>_(e))))),p=async()=>{if(1!=b.value)try{t.results=[...o.value],await t.submitRun(),i("submitted")}catch(e){console.error("Error submitting run:",e.message),alert("There was an error submitting your run. Please try again.")}else n.addSnackbar("One or more of the entered scores exceeds the maximum possible points for that exercise. Please update the score(s) accordingly.","red-lighten-1",-1)},g=()=>{i("edit")},x=()=>{i("cancel")};return(e,l)=>{const t=(0,a.g2)("v-spacer"),u=(0,a.g2)("v-btn"),n=(0,a.g2)("v-card-title"),s=(0,a.g2)("v-text-field"),i=(0,a.g2)("v-table"),d=(0,a.g2)("v-card-text"),b=(0,a.g2)("v-card-actions"),f=(0,a.g2)("v-card");return(0,a.uX)(),(0,a.Wv)(f,{class:"mt-4",elevation:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{class:"text-h6 font-weight-bold d-flex"},{default:(0,a.k6)((()=>[l[1]||(l[1]=(0,a.Lk)("div",null,"Review Your Results",-1)),(0,a.bF)(t),(0,a.bF)(u,{color:"red",variant:"outlined",onClick:x},{default:(0,a.k6)((()=>l[0]||(l[0]=[(0,a.eW)("Cancel Run")]))),_:1})])),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[l[2]||(l[2]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Exercise"),(0,a.Lk)("th",null,"Distance"),(0,a.Lk)("th",null,"Score"),(0,a.Lk)("th",null,"Max Score"),(0,a.Lk)("th",null,"Time (s)")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.value,((e,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:l},[(0,a.Lk)("td",null,(0,r.v_)(v(e.exercise_id)),1),(0,a.Lk)("td",null,(0,r.v_)(c(e.exercise_id))+" yards",1),(0,a.Lk)("td",null,[(0,a.bF)(s,{modelValue:o.value[l].score,"onUpdate:modelValue":e=>o.value[l].score=e,type:"number",density:"compact","hide-details":"",error:_(e)},null,8,["modelValue","onUpdate:modelValue","error"])]),(0,a.Lk)("td",null,(0,r.v_)(m(e.exercise_id)),1),(0,a.Lk)("td",null,[(0,a.bF)(s,{modelValue:o.value[l].time_taken,"onUpdate:modelValue":e=>o.value[l].time_taken=e,type:"number",density:"compact","hide-details":"",disabled:k(e.exercise_id)},null,8,["modelValue","onUpdate:modelValue","disabled"])])])))),128))])])),_:1})])),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,{onClick:g,variant:"outlined"},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Back to exercises")]))),_:1}),(0,a.bF)(t),(0,a.bF)(u,{onClick:p,variant:"outlined",color:"primary"},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("Submit")]))),_:1})])),_:1})])),_:1})}}};const w=W;var C=w;const V={key:0},L={key:1},S={key:2};var X={__name:"RecordNew",setup(e){const l=(0,n.rd)(),t=(0,s.v)(),i=d(),o=(0,u.KR)(null),c=(0,u.KR)(!1),v=(0,a.EW)((()=>null!==i.groupId)),m=(0,a.EW)((()=>o.value?t.exerciseGroupData.list.find((e=>e.id===o.value)):null));(0,a.sV)((()=>{(1===t.exerciseGroupData.list.length||t.allExercises.length<1)&&(t.getExerciseGroups(),t.getAllExercises())}));const k=()=>{o.value&&i.setGroupId(o.value)},_=(0,u.KR)(!1),b=()=>{_.value=!0},p=()=>{v.value=!1,_.value=!1,g()},g=()=>{l.push({name:"Dashboard"})},x=()=>{v.value=!1,_.value=!1,i.cancelRun()};return(e,l)=>{const n=(0,a.g2)("v-select"),s=(0,a.g2)("v-card-text"),d=(0,a.g2)("v-card"),f=(0,a.g2)("v-col"),R=(0,a.g2)("v-row"),y=(0,a.g2)("v-card-title"),h=(0,a.g2)("v-btn"),W=(0,a.g2)("v-slide-y-transition"),w=(0,a.g2)("v-container");return(0,a.uX)(),(0,a.Wv)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(W,{mode:"out-in"},{default:(0,a.k6)((()=>[v.value||_.value?v.value&&!_.value?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.bF)(F,{onComplete:b}),(0,a.bF)(R,{class:"mt-10",justify:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:l[1]||(l[1]=e=>c.value=!0)},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("Show General Scoring Rules")]))),_:1})])),_:1})])):((0,a.uX)(),(0,a.CE)("div",S,[_.value?((0,a.uX)(),(0,a.Wv)(C,{key:0,results:(0,u.R1)(i).results,exercises:(0,u.R1)(i).exercises,onSubmitted:p,onEdit:l[2]||(l[2]=e=>_.value=!1),onCancel:x},null,8,["results","exercises"])):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",V,[(0,a.bF)(R,{class:"mt-10"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(s,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),items:(0,u.R1)(t).createSelectableGroupsForNewRun,"item-title":"name","item-value":"id",label:"Select an Exercise Group",loading:(0,u.R1)(t).exerciseGroupData.loading,variant:"outlined"},null,8,["modelValue","items","loading"])])),_:1})])),_:1})])),_:1})])),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(R,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(f,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"pa-4",elevation:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"text-h5 font-weight-bold"},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(m.value.name),1)])),_:1}),(0,a.bF)(s,{class:"text-subtitle-1",style:{"white-space":"pre-line"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(m.value.description),1)])),_:1}),(0,a.bF)(s,{class:"text-h6 pb-0"},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("Scoring:")]))),_:1}),(0,a.bF)(s,{class:"text-subtitle-1",style:{"white-space":"pre-line"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,r.v_)(m.value.scoring_rules),1)])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(R,{justify:"center",class:"pb-5"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{onClick:g,class:"mr-3"},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("Cancel")]))),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(h,{key:0,onClick:k,color:"primary"},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("Start")]))),_:1})):(0,a.Q3)("",!0)])),_:1})]))])),_:1}),(0,a.bF)(E,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),text:m.value?.scoring_rules,onCloseDialog:l[4]||(l[4]=e=>c.value=!1)},null,8,["modelValue","text"])])),_:1})}}};const K=X;var I=K}}]);
//# sourceMappingURL=593.a8088542.js.map