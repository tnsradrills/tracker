{"version":3,"file":"js/553.82d29805.js","mappings":"6RAKA,MAAMA,GAAYC,EAAAA,EAAAA,KACZC,GAAWC,EAAAA,EAAAA,KACXC,GAAiBC,EAAAA,EAAAA,IAAI,MACrBC,GAAcD,EAAAA,EAAAA,IAAI,MAClBE,GAAcF,EAAAA,EAAAA,IAAIL,EAAUQ,SAASC,cACrCC,GAAsBL,EAAAA,EAAAA,KAAI,GAC1BM,GAAkBN,EAAAA,EAAAA,IAAI,MACtBO,GAAcP,EAAAA,EAAAA,IAAI,MAClBQ,GAAkBR,EAAAA,EAAAA,IAAI,MACtBS,GAAmBT,EAAAA,EAAAA,KAAI,GACvBU,GAAaV,EAAAA,EAAAA,KAAI,GACjBW,GAAmBC,EAAAA,EAAAA,KAAS,IAAM,QAAQC,KAAKN,EAAYO,SAC3DC,GAAYH,EAAAA,EAAAA,KAAS,IAAM,KAAKC,KAAKN,EAAYO,SACjDE,GAAmBJ,EAAAA,EAAAA,KAAS,OAC5BL,EAAYO,OACVP,EAAYO,MAAMG,QAAU,KAM9BC,GAAiBN,EAAAA,EAAAA,KAAS,IACD,MAAzBJ,EAAgBM,OACXP,EAAYO,QAAUN,EAAgBM,QAI3CK,GAAQC,EAAAA,EAAAA,IAAS,CACrBhB,aAAc,CAAEiB,KAAQA,GAAK,4CAC7BC,KAAM,CACHD,KAAQA,GAAK,0BACd,IAAMV,EAAiBG,OAAS,oBAChC,IAAMC,EAAUD,OAAS,oBACzB,IAAME,EAAiBF,OAAS,qBAElCS,aAAc,CAAC,IAAML,EAAeJ,OAAS,2BAC7CU,aAAc,CAAEH,KAAQA,GAAK,6BAGzBI,EAAoBC,UACxB,MAAM,MAAEC,SAAgB5B,EAAee,MAAMc,WAC7C,IAAKD,EACH,OAEFtB,EAAoBS,OAAQ,EAC5B,IAAIe,QAAgBlC,EAAU8B,kBAAkBvB,EAAYY,OACxDe,EAAQA,QACVhC,EAASiC,YAAY,qCAAsC,QAAS,KAEpEjC,EAASiC,YACP,oEACA,OACC,GAGLzB,EAAoBS,OAAQ,CAAK,EAE7BiB,EAAiBL,UACrB,MAAM,MAAEC,SAAgB1B,EAAYa,MAAMc,WAC1C,IAAKD,EACH,OAEFlB,EAAiBK,OAAQ,EACzB,IAAIe,QAAgBlC,EAAUoC,eAC5BxB,EAAYO,MACZR,EAAgBQ,OAEde,EAAQA,QACVhC,EAASiC,YAAY,oBAAqB,QAAS,KAEnDjC,EAASiC,YAAYD,EAAQG,QAAS,OAAQ,GAEhDvB,EAAiBK,OAAQ,CAAK,E,w3GC1EhC,MAAMmB,EAAc,EAEpB,O","sources":["webpack://tracker/./src/views/EditAccount.vue","webpack://tracker/./src/views/EditAccount.vue?a451"],"sourcesContent":["<script setup>\r\nimport { ref, reactive, computed } from \"vue\";\r\nimport { useUserStore } from \"@/stores/userData\";\r\nimport { useSnackbarStore } from \"@/stores/snackbar\";\r\n\r\nconst userStore = useUserStore();\r\nconst snackbar = useSnackbarStore();\r\nconst newDisplayForm = ref(null);\r\nconst newPassForm = ref(null);\r\nconst displayName = ref(userStore.userData.display_name);\r\nconst displayNameUpdating = ref(false);\r\nconst currentPassword = ref(null);\r\nconst newPassword = ref(null);\r\nconst confirmPassword = ref(null);\r\nconst passwordUpdating = ref(false);\r\nconst revealPass = ref(false);\r\nconst hasCapitalLetter = computed(() => /[A-Z]/.test(newPassword.value));\r\nconst hasNumber = computed(() => /\\d/.test(newPassword.value));\r\nconst atLeastEightChar = computed(() => {\r\n  if (newPassword.value) {\r\n    if (newPassword.value.length >= 8) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n});\r\nconst passwordsMatch = computed(() => {\r\n  if (confirmPassword.value != null) {\r\n    return newPassword.value === confirmPassword.value;\r\n  }\r\n  return false;\r\n});\r\nconst rules = reactive({\r\n  display_name: [(v) => !!v || \"A display name of some sort is required.\"],\r\n  pass: [\r\n    (v) => !!v || \"A password is required.\",\r\n    () => hasCapitalLetter.value || \"A bit stronger...\",\r\n    () => hasNumber.value || \"A bit stronger...\",\r\n    () => atLeastEightChar.value || \"A bit stronger...\",\r\n  ],\r\n  confirm_pass: [() => passwordsMatch.value || \"Passwords do not match.\"],\r\n  current_pass: [(v) => !!v || \"This field is required.\"],\r\n});\r\n\r\nconst updateDisplayName = async () => {\r\n  const { valid } = await newDisplayForm.value.validate();\r\n  if (!valid) {\r\n    return;\r\n  }\r\n  displayNameUpdating.value = true;\r\n  let success = await userStore.updateDisplayName(displayName.value);\r\n  if (success.success) {\r\n    snackbar.addSnackbar(\"Display name updated successfully!\", \"green\", 5000);\r\n  } else {\r\n    snackbar.addSnackbar(\r\n      \"There was a problem updating your display name. Please try again.\",\r\n      \"red\",\r\n      -1\r\n    );\r\n  }\r\n  displayNameUpdating.value = false;\r\n};\r\nconst updatePassword = async () => {\r\n  const { valid } = await newPassForm.value.validate();\r\n  if (!valid) {\r\n    return;\r\n  }\r\n  passwordUpdating.value = true;\r\n  let success = await userStore.updatePassword(\r\n    newPassword.value,\r\n    currentPassword.value\r\n  );\r\n  if (success.success) {\r\n    snackbar.addSnackbar(\"Password updated!\", \"green\", 5000);\r\n  } else {\r\n    snackbar.addSnackbar(success.message, \"red\", -1);\r\n  }\r\n  passwordUpdating.value = false;\r\n};\r\n</script>\r\n\r\n<template>\r\n  <v-container>\r\n    <v-card class=\"pa-4\" elevation=\"2\">\r\n      <v-card-title>Edit Account</v-card-title>\r\n      <v-card-text>\r\n        <v-form ref=\"newDisplayForm\">\r\n          <v-row justify=\"center\">\r\n            <v-col cols=\"12\" md=\"8\" class=\"pb-2\">\r\n              <v-text-field\r\n                v-model=\"displayName\"\r\n                label=\"Display Name\"\r\n                variant=\"outlined\"\r\n                :disabled=\"displayNameUpdating\"\r\n                :rules=\"rules.display_name\"\r\n                persistent-hint\r\n                :hint=\"\r\n                  'Current display name: ' + userStore.userData.display_name\r\n                \"\r\n              />\r\n            </v-col>\r\n            <v-col cols=\"12\" class=\"pt-0 text-center\">\r\n              <v-btn\r\n                color=\"primary\"\r\n                @click=\"updateDisplayName\"\r\n                variant=\"outlined\"\r\n                :loading=\"displayNameUpdating\"\r\n                :disabled=\"displayNameUpdating\"\r\n                >Change Display Name</v-btn\r\n              >\r\n            </v-col>\r\n          </v-row></v-form\r\n        >\r\n      </v-card-text>\r\n      <v-divider class=\"my-4\" />\r\n      <v-card-text>\r\n        <v-form ref=\"newPassForm\">\r\n          <v-row justify=\"center\">\r\n            <v-col cols=\"12\" md=\"8\" class=\"py-0\">\r\n              <v-text-field\r\n                v-model=\"currentPassword\"\r\n                label=\"Current Password\"\r\n                variant=\"outlined\"\r\n                :disabled=\"passwordUpdating\"\r\n                :append-inner-icon=\"\r\n                  revealPass ? 'mdi mdi-eye-closed' : 'mdi mdi-eye-outline'\r\n                \"\r\n                :type=\"revealPass ? 'text' : 'password'\"\r\n                @click:append-inner=\"revealPass = !revealPass\"\r\n              />\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"8\" class=\"pt-0\">\r\n              <v-text-field\r\n                v-model=\"newPassword\"\r\n                label=\"New Password\"\r\n                variant=\"outlined\"\r\n                :disabled=\"passwordUpdating\"\r\n                hide-details\r\n                :rules=\"rules.pass\"\r\n                :append-inner-icon=\"\r\n                  revealPass ? 'mdi mdi-eye-closed' : 'mdi mdi-eye-outline'\r\n                \"\r\n                :type=\"revealPass ? 'text' : 'password'\"\r\n                @click:append-inner=\"revealPass = !revealPass\"\r\n              />\r\n              <div class=\"text-caption mt-1 pl-1\">\r\n                <div :class=\"hasCapitalLetter ? 'text-success' : 'text-error'\">\r\n                  At least one capital letter\r\n                </div>\r\n                <div :class=\"hasNumber ? 'text-success' : 'text-error'\">\r\n                  At least one number\r\n                </div>\r\n                <div :class=\"atLeastEightChar ? 'text-success' : 'text-error'\">\r\n                  At least 8 characters long\r\n                </div>\r\n              </div>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"8\" class=\"py-0\">\r\n              <v-text-field\r\n                v-model=\"confirmPassword\"\r\n                type=\"password\"\r\n                label=\"Confirm New Password\"\r\n                variant=\"outlined\"\r\n                :disabled=\"passwordUpdating\"\r\n                :rules=\"rules.confirm_pass\"\r\n            /></v-col>\r\n            <v-col cols=\"12\" class=\"pt-0 text-center\"\r\n              ><v-btn\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                @click=\"updatePassword\"\r\n                :loading=\"passwordUpdating\"\r\n                :disabled=\"passwordUpdating\"\r\n              >\r\n                Change Password\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row></v-form\r\n        >\r\n      </v-card-text>\r\n\r\n      <v-card-actions>\r\n        <v-spacer />\r\n      </v-card-actions>\r\n    </v-card>\r\n  </v-container>\r\n</template>\r\n","import script from \"./EditAccount.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./EditAccount.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["userStore","useUserStore","snackbar","useSnackbarStore","newDisplayForm","ref","newPassForm","displayName","userData","display_name","displayNameUpdating","currentPassword","newPassword","confirmPassword","passwordUpdating","revealPass","hasCapitalLetter","computed","test","value","hasNumber","atLeastEightChar","length","passwordsMatch","rules","reactive","v","pass","confirm_pass","current_pass","updateDisplayName","async","valid","validate","success","addSnackbar","updatePassword","message","__exports__"],"sourceRoot":""}