"use strict";(self["webpackChunktracker"]=self["webpackChunktracker"]||[]).push([[359],{3358:function(e,t,a){a.d(t,{v:function(){return r}});a(8111),a(2489);var l=a(2261),i=a(144),o=a(6768),n=a(7082);const r=(0,l.nY)("exercise",(()=>{const e=(0,i.Kh)({list:[{name:"All",id:0}],loading:!0}),t=(0,i.KR)([]),a=(0,i.Kh)({group_id:null,exercises:[]}),l=async()=>{const{data:t}=await n.N.from("exercise_groups").select("*");if(t){const a={id:0,name:"All"},l=[a,...t].sort(((e,t)=>e.id-t.id));e.list=l,e.loading=!1}},r=(0,o.EW)((()=>e.list.filter((e=>0!=e.id)))),s=async()=>{const{data:e}=await n.N.from("exercises").select("*").order("group_id").order("ordering");e&&(t.value=e)};return{exerciseGroupData:e,createSelectableGroupsForNewRun:r,allExercises:t,newRunRecording:a,getExerciseGroups:l,getAllExercises:s}}))},5359:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});a(8111),a(2489),a(116),a(1701);var l=a(6768),i=a(144),o=a(4232),n=a(3358),r=a(2261),s=a(7082);const c=(0,r.nY)("leaderboard",(()=>{const e=(0,i.KR)([]),t=(0,i.KR)(!0),a=(0,i.KR)(null),l=async(l,i=null,o="match_percentage")=>{t.value=!0,a.value=null;let n=s.N.from("leaderboard_scores").select("*").eq("exercise_group_id",l);i&&"All"!==i&&(n=n.eq("region",i)),["total_score","average_score","match_percentage"].includes(o)&&(n=n.order(o,{ascending:!1}));const{data:r,error:c}=await n;c?a.value=c.message:e.value=r,t.value=!1};return{leaderboard:e,loading:t,fetchLeaderboard:l}}));var u=a(8648);const d={class:"font-weight-bold"},g={class:"font-weight-bold"};var m={__name:"LeaderBoard",setup(e){const t=(0,u.n)(),a=c(),r=(0,n.v)(),s=(0,i.KR)(1),m=(0,i.KR)(null),v=(0,i.KR)("match_percentage"),p=(0,i.KR)([]),_=(0,i.KR)([{text:"Latest Match Percentage",value:"match_percentage"},{text:"Weighted Match Percentage",value:"weighted_match_percentage"},{text:"Average Score",value:"average_score"},{text:"Top Score",value:"total_score"}]),h=[{title:"Rank",value:"position"},{title:"User",value:"display_name"},{title:"Region",value:"region"},{title:"Latest Match Percentage",value:"match_percentage"},{title:"Weighted Match Percentage",value:"weighted_match_percentage"},{title:"Avg Score",value:"average_score"},{title:"Summed Total Score",value:"total_score"},{title:"# of Attempts",value:"run_count"}],b=async()=>{s.value&&(await a.fetchLeaderboard(s.value,m.value,v.value),p.value=a.leaderboard)},f=(0,l.EW)((()=>{let e=p.value;null!==m.value&&(e=e.filter((e=>e.region===m.value)));const t=[...e].sort(((e,t)=>t[v.value]-e[v.value]));return t.map(((e,t)=>({...e,position:t+1})))})),k=(0,l.EW)((()=>f.value.filter((e=>e.run_count<5)))),w=(0,l.EW)((()=>f.value.filter((e=>e.run_count>=5)))),W=(0,l.EW)((()=>[{id:null,name:"All regions"},...t.regionListData.list])),x=(0,l.EW)((()=>r.exerciseGroupData.list.slice(1)));(0,l.wB)([s],b,{immediate:!0});const y=e=>t.regionListData.list.find((t=>t.id==e))?.name||"Unknown";return(0,l.sV)((()=>{t.regionListData?.list.length<1&&t.retrieveRegionList(),1===r.exerciseGroupData.list.length&&r.getExerciseGroups(),b()})),(e,n)=>{const r=(0,l.g2)("v-card-title"),c=(0,l.g2)("v-select"),u=(0,l.g2)("v-col"),p=(0,l.g2)("v-row"),b=(0,l.g2)("v-card"),f=(0,l.g2)("v-tooltip"),R=(0,l.g2)("v-skeleton-loader"),L=(0,l.g2)("v-data-table"),F=(0,l.g2)("v-container");return(0,l.uX)(),(0,l.Wv)(F,null,{default:(0,l.k6)((()=>[(0,l.bF)(b,{class:"pa-4",elevation:"2"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"text-h5 font-weight-bold"},{default:(0,l.k6)((()=>n[3]||(n[3]=[(0,l.eW)("Leaderboards")]))),_:1}),(0,l.bF)(p,{class:"mt-3"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{cols:"12",md:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=e=>s.value=e),items:x.value,"item-title":"name","item-value":"id",label:"Exercise Group",variant:"outlined",density:"compact"},null,8,["modelValue","items"])])),_:1}),(0,l.bF)(u,{cols:"12",md:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e),items:W.value,loading:(0,i.R1)(t).regionListData.loading,"item-title":"name","item-value":"id",label:"Region",variant:"outlined",density:"compact"},null,8,["modelValue","items","loading"])])),_:1}),(0,l.bF)(u,{cols:"12",md:"4"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=e=>v.value=e),items:_.value,"item-value":"value","item-title":"text",label:"Ranking Metric",variant:"outlined",density:"compact"},null,8,["modelValue","items"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(b,{class:"mt-5",elevation:"2"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"text-h6 font-weight-bold"},{default:(0,l.k6)((()=>n[4]||(n[4]=[(0,l.eW)(" 5 - 10 Attempts ")]))),_:1}),(0,l.bF)(L,{headers:h,items:w.value,class:"elevation-1","item-value":"alt_user_id",dense:"",loading:(0,i.R1)(a).loading,"items-per-page-text":"Rows per page","hide-default-footer":w.value.length<=10},{"header.weighted_match_percentage":(0,l.k6)((()=>[(0,l.bF)(f,{location:"top"},{activator:(0,l.k6)((({props:e})=>[(0,l.Lk)("span",(0,o._B)((0,l.Ng)(e))," Weighted Match % ",16)])),default:(0,l.k6)((()=>[n[5]||(n[5]=(0,l.Lk)("span",null,[(0,l.eW)(" Calculated by comparing your "),(0,l.Lk)("strong",null,"4 best runs"),(0,l.eW)(" to the top shooter's 4 best runs, scaled by how many attempts you've made. Encourages practice without punishing activity. ")],-1))])),_:1})])),loading:(0,l.k6)((()=>[(0,l.bF)(R,{type:"table-row@10"})])),"item.position":(0,l.k6)((({item:e})=>[(0,l.Lk)("span",d,"#"+(0,o.v_)(e.position),1)])),"item.match_percentage":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(e.match_percentage)+"% ",1)])),"item.weighted_match_percentage":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(e.weighted_match_percentage)+"% ",1)])),"item.total_score":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(e.total_score+" / "+e.total_possible),1)])),"item.region":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(y(e.region)),1)])),_:1},8,["items","loading","hide-default-footer"])])),_:1}),(0,l.bF)(b,{class:"mt-5",elevation:"2"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"text-h6 font-weight-bold"},{default:(0,l.k6)((()=>n[6]||(n[6]=[(0,l.eW)(" 1 - 4 Attempts ")]))),_:1}),(0,l.bF)(L,{headers:h,items:k.value,class:"elevation-1","item-value":"alt_user_id",dense:"",loading:(0,i.R1)(a).loading,"items-per-page-text":"Rows per page","hide-default-footer":k.value.length<=10},{loading:(0,l.k6)((()=>[(0,l.bF)(R,{type:"table-row@10"})])),"header.weighted_match_percentage":(0,l.k6)((()=>[(0,l.bF)(f,{location:"top"},{activator:(0,l.k6)((({props:e})=>[(0,l.Lk)("span",(0,o._B)((0,l.Ng)(e))," Weighted Match % ",16)])),default:(0,l.k6)((()=>[n[7]||(n[7]=(0,l.Lk)("span",null,[(0,l.eW)(" Calculated by comparing your "),(0,l.Lk)("strong",null,"4 best runs"),(0,l.eW)(" to the top shooter's 4 best runs, scaled by how many attempts you've made. Encourages practice without punishing activity. ")],-1))])),_:1})])),"item.position":(0,l.k6)((({item:e})=>[(0,l.Lk)("span",g,"#"+(0,o.v_)(e.position),1)])),"item.weighted_match_percentage":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(e.weighted_match_percentage)+"% ",1)])),"item.match_percentage":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(e.match_percentage)+"% ",1)])),"item.total_score":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(e.total_score+" / "+e.total_possible),1)])),"item.region":(0,l.k6)((({item:e})=>[(0,l.eW)((0,o.v_)(y(e.region)),1)])),_:1},8,["items","loading","hide-default-footer"])])),_:1})])),_:1})}}};const v=m;var p=v},8648:function(e,t,a){a.d(t,{n:function(){return n}});var l=a(2261),i=a(144),o=a(7082);const n=(0,l.nY)("region",(()=>{const e=(0,i.Kh)({list:[],loading:!0}),t=async()=>{e.list=[],e.loading=!0;const{data:t,error:a}=await o.N.from("regions").select();t?(e.list=t,e.loading=!1):console.log(a)};return{regionListData:e,retrieveRegionList:t}}))}}]);
//# sourceMappingURL=359.bb935b91.js.map