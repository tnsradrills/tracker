"use strict";(self["webpackChunktracker"]=self["webpackChunktracker"]||[]).push([[766],{3358:function(e,l,t){t.d(l,{v:function(){return n}});t(8111),t(2489);var a=t(2261),u=t(144),s=t(6768),r=t(7082);const n=(0,a.nY)("exercise",(()=>{const e=(0,u.Kh)({list:[{name:"All",id:0}],loading:!0}),l=(0,u.KR)([]),t=(0,u.Kh)({group_id:null,exercises:[]}),a=async()=>{const{data:l}=await r.N.from("exercise_groups").select("*");if(l){const t={id:0,name:"All"},a=[t,...l].sort(((e,l)=>e.id-l.id));e.list=a,e.loading=!1}},n=(0,s.EW)((()=>e.list.filter((e=>0!=e.id)))),i=async()=>{const{data:e}=await r.N.from("exercises").select("*").order("group_id").order("ordering");e&&(l.value=e)};return{exerciseGroupData:e,createSelectableGroupsForNewRun:n,allExercises:l,newRunRecording:t,getExerciseGroups:a,getAllExercises:i}}))},4766:function(e,l,t){t.r(l),t.d(l,{default:function(){return G}});t(4114),t(8111),t(116);var a=t(6768),u=t(144),s=t(4232),r=t(1387),n=t(3358),i=(t(2489),t(2261)),o=t(7082),c=t(7719);const d=(0,i.nY)("runRecorder",(()=>{const e=(0,n.v)(),l=(0,u.KR)(null),t=(0,u.KR)(0),s=(0,u.KR)([]),r=(0,a.EW)((()=>e.allExercises.filter((e=>e.group_id===l.value)))),i=(0,a.EW)((()=>r.value[t.value])),d=e=>{l.value=e,t.value=0,s.value=[]},v=(e,l)=>{s.value[t.value]={exercise_id:i.value.id,score:parseFloat(e),time_taken:parseFloat(l)}},m=()=>{t.value<r.value.length-1&&t.value++},k=()=>{t.value>0&&t.value--},b=()=>{l.value=null,t.value=0,s.value=[]},_=async()=>{const e=(0,c.k)();if(!e.userData.alt||!l.value||0===s.value.length)throw new Error("Missing required data to submit run.");const{error:a}=await o.N.rpc("submit_run_transaction",{p_alt_user_id:e.userData.alt,p_group_id:l.value,p_results:s.value});if(a)throw new Error("Failed to submit run transactionally.");return l.value=null,t.value=0,e.fetchRuns(),!0};return{groupId:l,currentIndex:t,results:s,exercises:r,currentExercise:i,setGroupId:d,saveResult:v,goNext:m,goBack:k,cancelRun:b,submitRun:_}})),v={class:"text-subtitle-1"},m={class:"text-subtitle-1"},k={class:"text-subtitle-1"},b={class:"text-subtitle-1"},_={key:0,class:"text-subtitle-1"},p={key:1},g={key:0,class:"text-subtitle-1"},x={class:"text-subtitle-1",style:{"white-space":"pre-line"}};var f={__name:"RunRecorder",emits:["complete"],setup(e,{emit:l}){const t=l,r=d(),n=(0,u.KR)(null),i=(0,u.KR)(null),o=(0,u.KR)(null),c=(0,a.EW)((()=>[e=>null!==e&&""!==e||"Score cannot be empty.",e=>parseFloat(e)<=r.currentExercise?.max_points||`Score cannot exceed ${r.currentExercise?.max_points} points.`])),f=[e=>null!==e&&""!==e||"Time cannot be empty.",e=>!isNaN(parseFloat(e))||"Time must be a number."];(0,a.wB)((()=>r.currentIndex),(()=>{const e=r.results[r.currentIndex];n.value=e?.score??null,i.value=e?.time_taken??null}),{immediate:!0});const F=async()=>{const{valid:e}=await o.value.validate();e&&(r.saveResult(n.value,i.value),r.currentIndex<r.exercises.length-1?r.goNext():t("complete"))},R=()=>{r.goBack()},y=()=>{r.cancelRun()};return(e,l)=>{const t=(0,a.g2)("v-card-title"),d=(0,a.g2)("v-card-subtitle"),E=(0,a.g2)("v-card-text"),h=(0,a.g2)("v-text-field"),W=(0,a.g2)("v-col"),w=(0,a.g2)("v-row"),C=(0,a.g2)("v-form"),V=(0,a.g2)("v-btn"),L=(0,a.g2)("v-spacer"),S=(0,a.g2)("v-card-actions"),X=(0,a.g2)("v-card"),K=(0,a.g2)("v-slide-x-transition");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(K,{mode:"out-in"},{default:(0,a.k6)((()=>[(0,u.R1)(r).currentExercise?((0,a.uX)(),(0,a.Wv)(X,{key:(0,u.R1)(r).currentIndex,class:"mt-4",elevation:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{class:"text-h6 font-weight-bold"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)((0,u.R1)(r).currentExercise.name),1)])),_:1}),(0,a.bF)(d,{class:"text-caption"},{default:(0,a.k6)((()=>[(0,a.eW)(" Exercise "+(0,s.v_)((0,u.R1)(r).currentIndex+1)+" of "+(0,s.v_)((0,u.R1)(r).exercises.length),1)])),_:1}),(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",v,[l[2]||(l[2]=(0,a.Lk)("strong",null,"Round Count:",-1)),(0,a.eW)(" "+(0,s.v_)((0,u.R1)(r).currentExercise.rounds),1)]),(0,a.Lk)("div",m,[l[3]||(l[3]=(0,a.Lk)("strong",null,"Distance:",-1)),(0,a.eW)(" "+(0,s.v_)((0,u.R1)(r).currentExercise.distance_yards)+" yards ",1)]),(0,a.Lk)("div",k,[l[4]||(l[4]=(0,a.Lk)("strong",null,"Par Time:",-1)),(0,a.eW)(" "+(0,s.v_)((0,u.R1)(r).currentExercise.par_time??"N/A")+" seconds ",1)]),(0,a.Lk)("div",b,[l[5]||(l[5]=(0,a.Lk)("strong",null,"Start Position:",-1)),(0,a.eW)(" "+(0,s.v_)((0,u.R1)(r).currentExercise?.options?.start_position??"Not specified"),1)]),(0,u.R1)(r).currentExercise?.options?.hand_usage?((0,a.uX)(),(0,a.CE)("div",_,[l[6]||(l[6]=(0,a.Lk)("strong",null,"Hand Usage:",-1)),(0,a.eW)(" "+(0,s.v_)((0,u.R1)(r).currentExercise?.options?.hand_usage),1)])):(0,a.Q3)("",!0),null!=(0,u.R1)(r).currentExercise.options?((0,a.uX)(),(0,a.CE)("div",p,[(0,u.R1)(r).currentExercise.options.modified_scoring?((0,a.uX)(),(0,a.CE)("div",g,[l[7]||(l[7]=(0,a.Lk)("strong",null,"Modified Scoring Rules:",-1)),(0,a.eW)(" "+(0,s.v_)((0,u.R1)(r).currentExercise.options.modified_scoring_desc),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),l[8]||(l[8]=(0,a.Lk)("div",{class:"text-subtitle-1 mt-2"},[(0,a.Lk)("strong",null,"Instructions:")],-1)),(0,a.Lk)("div",x,(0,s.v_)((0,u.R1)(r).currentExercise.instructions),1)])),_:1}),(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(C,{ref_key:"scoreForm",ref:o},{default:(0,a.k6)((()=>[(0,a.bF)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(W,{cols:"12",md:"6"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),label:"Score",type:"number",variant:"outlined",step:"0.01",rules:c.value},null,8,["modelValue","rules"])])),_:1}),(0,a.bF)(W,{cols:"12",md:"6"},{default:(0,a.k6)((()=>[(0,a.bF)(h,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),label:"Time (seconds)",type:"number",variant:"outlined",step:"0.01",rules:f},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},512)])),_:1}),(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.bF)(V,{onClick:y,variant:"outlined",color:"red"},{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.eW)("Cancel Run")]))),_:1}),(0,a.bF)(L),(0,a.bF)(V,{onClick:R,variant:"outlined",disabled:0===(0,u.R1)(r).currentIndex,class:"mr-3"},{default:(0,a.k6)((()=>l[10]||(l[10]=[(0,a.eW)("Back")]))),_:1},8,["disabled"]),(0,a.bF)(V,{onClick:F,color:"primary",variant:"outlined"},{default:(0,a.k6)((()=>l[11]||(l[11]=[(0,a.eW)("Next")]))),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0)])),_:1})])}}};const F=f;var R=F,y={__name:"ScoringRulesDialog",props:{modelValue:Boolean,text:{type:String,default:null}},emits:["update:modelValue"],setup(e,{emit:l}){const t=e,u=l,r=(0,a.EW)({get:()=>t.modelValue,set:e=>u("update:modelValue",e)});return(e,l)=>{const u=(0,a.g2)("v-card-title"),n=(0,a.g2)("v-card-text"),i=(0,a.g2)("v-spacer"),o=(0,a.g2)("v-btn"),c=(0,a.g2)("v-card-actions"),d=(0,a.g2)("v-card"),v=(0,a.g2)("v-dialog");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),width:"auto"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(u,null,{default:(0,a.k6)((()=>l[2]||(l[2]=[(0,a.eW)("Scoring Rules")]))),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(t.text),1)])),_:1}),(0,a.bF)(c,null,{default:(0,a.k6)((()=>[(0,a.bF)(i),(0,a.bF)(o,{onClick:l[0]||(l[0]=e=>r.value=!1)},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Close")]))),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};const E=y;var h=E,W=(t(3579),t(7727));const w={class:"table-scroll-wrapper"};var C={__name:"RunSummary",props:{results:{type:Array,required:!0},exercises:{type:Array,required:!0}},emits:["submit","edit","cancel"],setup(e,{emit:l}){const t=d(),r=(0,W.e)(),n=e,i=(0,u.KR)(!1),o=l,c=(0,u.KR)([...n.results]),v=e=>n.exercises.find((l=>l.id===e))?.distance_yards||"Unknown",m=e=>n.exercises.find((l=>l.id===e))?.name||"Unknown",k=e=>n.exercises.find((l=>l.id===e))?.max_points||"Unknown",b=e=>{const l=k(e.exercise_id);return"number"===typeof l&&e.score>l},_=(0,a.EW)((()=>c.value.some((e=>b(e))))),p=async()=>{if(1!=_.value)try{i.value=!0,t.results=[...c.value],await t.submitRun(),o("submitted")}catch(e){console.error("Error submitting run:",e.message),alert("There was an error submitting your run. Please try again.")}finally{i.value=!1}else r.addSnackbar("One or more of the entered scores exceeds the maximum possible points for that exercise. Please update the score(s) accordingly.","red-lighten-1",-1)},g=()=>{o("edit")},x=()=>{o("cancel")};return(e,l)=>{const t=(0,a.g2)("v-col"),u=(0,a.g2)("v-spacer"),r=(0,a.g2)("v-btn"),n=(0,a.g2)("v-row"),o=(0,a.g2)("v-card-title"),d=(0,a.g2)("v-text-field"),_=(0,a.g2)("v-table"),f=(0,a.g2)("v-card-text"),F=(0,a.g2)("v-progress-linear"),R=(0,a.g2)("v-card-actions"),y=(0,a.g2)("v-card");return(0,a.uX)(),(0,a.Wv)(y,{class:"mt-4",elevation:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{class:"text-h6 font-weight-bold d-flex"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{class:"mt-0"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{class:"py-0",cols:"12",sm:"auto"},{default:(0,a.k6)((()=>l[0]||(l[0]=[(0,a.eW)("Review Your Results")]))),_:1}),(0,a.bF)(u),(0,a.bF)(t,{class:"pt-0",cols:"12",sm:"auto"},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"ml-md-5",color:"red",size:"x-small",variant:"outlined",onClick:x,disabled:i.value},{default:(0,a.k6)((()=>l[1]||(l[1]=[(0,a.eW)("Cancel Run")]))),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1}),i.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(f,{key:0},{default:(0,a.k6)((()=>[(0,a.Lk)("div",w,[(0,a.bF)(_,null,{default:(0,a.k6)((()=>[l[2]||(l[2]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Exercise"),(0,a.Lk)("th",null,"Distance"),(0,a.Lk)("th",null,"Score"),(0,a.Lk)("th",null,"Max Score"),(0,a.Lk)("th",null,"Time (s)")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(c.value,((e,l)=>((0,a.uX)(),(0,a.CE)("tr",{key:l},[(0,a.Lk)("td",null,(0,s.v_)(m(e.exercise_id)),1),(0,a.Lk)("td",null,(0,s.v_)(v(e.exercise_id))+" yards",1),(0,a.Lk)("td",null,[(0,a.bF)(d,{modelValue:c.value[l].score,"onUpdate:modelValue":e=>c.value[l].score=e,type:"number",density:"compact","hide-details":"",error:b(e)},null,8,["modelValue","onUpdate:modelValue","error"])]),(0,a.Lk)("td",null,(0,s.v_)(k(e.exercise_id)),1),(0,a.Lk)("td",null,[(0,a.bF)(d,{modelValue:c.value[l].time_taken,"onUpdate:modelValue":e=>c.value[l].time_taken=e,type:"number",density:"compact","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])])])))),128))])])),_:1})])])),_:1})),i.value?((0,a.uX)(),(0,a.Wv)(f,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(n,{justify:"center",class:"mt-8"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{cols:"10",md:"6"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{indeterminate:""})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(R,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{onClick:g,variant:"outlined",disabled:i.value},{default:(0,a.k6)((()=>l[3]||(l[3]=[(0,a.eW)("Back to exercises")]))),_:1},8,["disabled"]),(0,a.bF)(u),(0,a.bF)(r,{onClick:p,variant:"outlined",color:"primary",disabled:i.value,loading:i.value},{default:(0,a.k6)((()=>l[4]||(l[4]=[(0,a.eW)("Submit")]))),_:1},8,["disabled","loading"])])),_:1})])),_:1})}}},V=t(1241);const L=(0,V.A)(C,[["__scopeId","data-v-55e221d5"]]);var S=L;const X={key:0},K={key:1},I={key:2};var N={__name:"RecordNew",setup(e){const l=(0,r.rd)(),t=(0,n.v)(),i=d(),o=(0,u.KR)(null),c=(0,u.KR)(!1),v=(0,a.EW)((()=>null!==i.groupId)),m=(0,a.EW)((()=>o.value?t.exerciseGroupData.list.find((e=>e.id===o.value)):null));(0,a.sV)((()=>{(1===t.exerciseGroupData.list.length||t.allExercises.length<1)&&(t.getExerciseGroups(),t.getAllExercises())}));const k=()=>{o.value&&i.setGroupId(o.value)},b=(0,u.KR)(!1),_=()=>{b.value=!0},p=()=>{v.value=!1,b.value=!1,i.results.value=[],g()},g=()=>{l.push({name:"Dashboard"})},x=()=>{v.value=!1,b.value=!1,i.cancelRun()};return(e,l)=>{const r=(0,a.g2)("v-select"),n=(0,a.g2)("v-card-text"),d=(0,a.g2)("v-card"),f=(0,a.g2)("v-col"),F=(0,a.g2)("v-row"),y=(0,a.g2)("v-card-title"),E=(0,a.g2)("v-btn"),W=(0,a.g2)("v-slide-y-transition"),w=(0,a.g2)("v-container");return(0,a.uX)(),(0,a.Wv)(w,null,{default:(0,a.k6)((()=>[(0,a.bF)(W,{mode:"out-in"},{default:(0,a.k6)((()=>[v.value||b.value?v.value&&!b.value?((0,a.uX)(),(0,a.CE)("div",K,[(0,a.bF)(R,{onComplete:_}),(0,a.bF)(F,{class:"mt-10",justify:"center"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{onClick:l[1]||(l[1]=e=>c.value=!0)},{default:(0,a.k6)((()=>l[8]||(l[8]=[(0,a.eW)("Show General Scoring Rules")]))),_:1})])),_:1})])):((0,a.uX)(),(0,a.CE)("div",I,[b.value?((0,a.uX)(),(0,a.Wv)(S,{key:0,results:(0,u.R1)(i).results,exercises:(0,u.R1)(i).exercises,onSubmitted:p,onEdit:l[2]||(l[2]=e=>b.value=!1),onCancel:x},null,8,["results","exercises"])):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",X,[(0,a.bF)(F,{class:"mt-10"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(d,null,{default:(0,a.k6)((()=>[(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),items:(0,u.R1)(t).createSelectableGroupsForNewRun,"item-title":"name","item-value":"id",label:"Select an Exercise Group",loading:(0,u.R1)(t).exerciseGroupData.loading,variant:"outlined"},null,8,["modelValue","items","loading"])])),_:1})])),_:1})])),_:1})])),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(F,{key:0},{default:(0,a.k6)((()=>[(0,a.bF)(f,{cols:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{class:"pa-4",elevation:"2"},{default:(0,a.k6)((()=>[(0,a.bF)(y,{class:"text-h5 font-weight-bold"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(m.value.name),1)])),_:1}),(0,a.bF)(n,{class:"text-subtitle-1",style:{"white-space":"pre-line"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(m.value.description),1)])),_:1}),(0,a.bF)(n,{class:"text-h6 pb-0"},{default:(0,a.k6)((()=>l[5]||(l[5]=[(0,a.eW)("Scoring:")]))),_:1}),(0,a.bF)(n,{class:"text-subtitle-1",style:{"white-space":"pre-line"}},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(m.value.scoring_rules),1)])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(F,{justify:"space-around",class:"pb-5"},{default:(0,a.k6)((()=>[(0,a.bF)(E,{onClick:g,class:"mr-3"},{default:(0,a.k6)((()=>l[6]||(l[6]=[(0,a.eW)("Cancel")]))),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(E,{key:0,onClick:k,color:"primary"},{default:(0,a.k6)((()=>l[7]||(l[7]=[(0,a.eW)("Start")]))),_:1})):(0,a.Q3)("",!0)])),_:1})]))])),_:1}),(0,a.bF)(h,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c.value=e),text:m.value?.scoring_rules,onCloseDialog:l[4]||(l[4]=e=>c.value=!1)},null,8,["modelValue","text"])])),_:1})}}};const U=N;var G=U}}]);
//# sourceMappingURL=766.b2775450.js.map